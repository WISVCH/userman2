{% extends "base.html" %}
{% load userman_tags %}
{% block title %}Userman2 â€” Editing {{ user.uid }}{% endblock %}
{% load static %}
{% block content %}
<div>
    <table class="table">
        <thead>
            <th colspan='3'>
                General Information
            </th>
        </tr>
        <tr>
            <td style="width: 32px;"><a href='chuid'><i class="far fa-edit"></i></a></td>
            <td style="width: 11em;">UID</td>
            <td>{{ user.uid }}</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>UID Number</td>
            <td>{{ user.uidNumber }}</td>
        </tr>
        <tr>
            <td rowspan='4'><a href='chfn'><i class="far fa-edit"></i></a></td>
            <td>Full Name</td>
            <td>{{ user.gecos.full_name }}</td>
        </tr>
        <tr>
            <td>Room Number</td>
            <td>{{ user.gecos.room_number }}</td>
        </tr>
        <tr>
            <td>Work Phone</td>
            <td>{{ user.gecos.work_phone }}</td>
        </tr>
        <tr>
            <td>Home Phone</td>
            <td>{{ user.gecos.home_phone }}</td>
        </tr>
        <tr>
            <td><a href='chdesc'><i class="far fa-edit"></i></a></td>
            <td>Description</td>
            <td>{{ user.description }}</td>
        </tr>
        <tr>
            <td><a href='chwarnrm'><i class="far fa-edit"></i></a></td>
            <td>Removal date</td>
            <td>{{ user.toBeDeleted }}</td>
        </tr>
        <tr>
            <td><a href='chsh'><i class="far fa-edit"></i></a></td>
            <td>Login Shell</td>
            <td>{{ user.loginShell }}</td>
        </tr>
        <tr>
            <td><a href='chhomeank'><i class="far fa-edit"></i></a></td>
            <td>Home Directory</td>
            <td>{{ user.homeDirectoryAnk }}</td>
        </tr>
        <tr>
            <td><a href='chhomech'><i class="far fa-edit"></i></a></td>
            <td>Home Directory (CH)</td>
            <td>{{ user.homeDirectoryCH }}</td>
        </tr>
        <tr>
            <td><a href='chgroup'><i class="far fa-edit"></i></a></td>
            <td>Primary Group ID</td>
            <td>{{ user.gidNumber }} (<a
                    href='/groups/{{ user.gidNumber|groupname }}'>{{ user.gidNumber|groupname }}</a>)
            </td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>Dienst2</td>
            <td>{{ dienst2Status|dienst2icon }} {{ dienst2Status|dienst2message }}</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td><a href='/groups?uid={{ user.uid }}'>Groups</a></td>
            <td>{% for group in user.getSecondaryGroups %}
                <a href='{% url 'displayGroup' group %}'>{{ group }}</a> {% endfor %}</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td><a href='/aliases?uid={{ user.uid }}'>Aliases</a></td>
            <td>{% for alias in user.getDirectAliases %}
                <a href='{% url 'displayAlias' alias %}'>{{ alias }}</a> {% endfor %}</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td><a href='/aliases?uid={{ user.uid }}'>Indirect Aliases</a></td>
            <td>{% for alias in user.getIndirectAliases %}
                <a href='{% url 'displayAlias' alias %}'>{{ alias }}</a> {% endfor %}</td>
        </tr>
        <thead>
            <th colspan='3'>
                Authorized Services <a href='chpriv'><i class="far fa-edit"></i></a>
            </th>
        </tr>
        {% for service in user.authorizedServices %}
            <tr>
                <td></td>
                <td>Service</td>
                <td>{{ service }}</td>
            </tr>
        {% endfor %}
    </table>

    <p>
    <ul>
        <li><a href='showldif'>Display an LDIF for this user</a>
    </ul></p>
    <p>
    <ul>
        <li><a href='chpasswd/'>Change user's password</a>
        <li>
            {% if password %}
                <span style="color: #BD0000">New password: <code>{{ password }}</code></span>
            {% else %}
                <a href='resetpasswd/' onclick="return confirm('Reset password for {{ user.uid }}?')">
                    Reset user's password</a>
            {% endif %}
    </ul></p>
    <p>
    <ul>
        <li><a href='removeprofile/' onclick="return confirm('Remove profile for {{ user.uid }}?')">Remove user's
            profile</a>
        <li><a href='/massmail/writemail/?users={{ user.uid }}&fromaddress=beheer%40ch.tudelft.nl'>Send Removal
            Warning</a>
        <li><a href='rm/' onclick="return confirm('Are you very sure you really want to delete {{ user.uid }}?')">Remove
            user</a>
    </ul></div>
{% endblock %}
